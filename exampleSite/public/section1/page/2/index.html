<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=icon type=image/ico href=http://localhost:1313/favicon//favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon//favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon//favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=http://localhost:1313/favicon//android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=http://localhost:1313/favicon//apple-touch-icon.png><link rel=alternate type=application/rss+xml href=http://localhost:1313/section1/index.xml title="My website"><meta name=description content><title>Section 1 | My website
</title><link rel=canonical href=http://localhost:1313/section1/><meta property="og:url" content="http://localhost:1313/section1/"><meta property="og:site_name" content="My website"><meta property="og:title" content="Section 1"><meta property="og:description" content="Here is my website"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><link rel=stylesheet href=/assets/combined.min.07ce338b4bb43d097400d7890f492d5be8fce1156f207c6d7cf6b096c5338732.css media=all></head><body class=auto><div class=content><header><div class=header><h1 class=header-title><a href=http://localhost:1313/ style=display:flex;align-items:center><img src=/favicon/apple-touch-icon.png alt=Icon height=40>
<span>Home Title</span></a></h1><div class=flex><p class=small><a href=http://localhost:1313/>/home</a></p><p class="small
bold"><a href=http://localhost:1313/section1/>/Section1</a></p><p class=small><a href=http://localhost:1313/section2/>/Section2</a></p><p class=small><a href=http://localhost:1313/about>/about</a></p></div></header><main class=main><div class=list-container><div class=breadcrumbs><a href=/>Home</a>
<span class=breadcrumbs-separator>> </span><a class=breadcrumbs-current href=/section1/>Section 1</a></div><h2>Section 1</h2><span style=display:block;color:var(--content-secondary);margin-bottom:2em></span><div class=post-line><p class=line-date>Jan 18, 2019</p><div><p class=line-title><a href=/section1/2019-01-18-es6/>ES6について</a></p><p class=line-summary><h2 class=heading id=overview>Overview
<a href=#overview>#</a></h2><p><a href=https://github.com/lukehoban/es6features#readme>https://github.com/lukehoban/es6features#readme</a></p><p><a href=http://help.wtf/es6>http://help.wtf/es6</a></p><p><a href=http://es6-features.org>http://es6-features.org</a></p><h2 class=heading id=string>String
<a href=#string>#</a></h2><h3 class=heading id=stringx-is-deprecated-use-stringprototypex-instead>String.x is deprecated; use String.prototype.x instead.
<a href=#stringx-is-deprecated-use-stringprototypex-instead>#</a></h3><p>非推奨の構文:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span><span style=color:#ff5c57>var</span> num <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>15</span>; 
</span></span><span style=display:flex><span><span style=color:#ff5c57>String</span>.replace(num, <span style=color:#5af78e>/5/</span>, <span style=color:#5af78e>&#39;2&#39;</span>);
</span></span></code></pre></div><p>標準の構文:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span><span style=color:#ff5c57>var</span> num <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>15</span>;
</span></span><span style=display:flex><span><span style=color:#ff5c57>String</span>(num).replace(<span style=color:#5af78e>/5/</span>, <span style=color:#5af78e>&#39;2&#39;</span>);
</span></span></code></pre></div><h3 class=heading id=template-literal>Template literal
<a href=#template-literal>#</a></h3><p>Nesting templates:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Javascript data-lang=Javascript><span style=display:flex><span><span style=color:#ff6ac1>const</span> classes <span style=color:#ff6ac1>=</span> <span style=color:#5af78e>`header </span><span style=color:#5af78e>${</span> isLargeScreen() <span style=color:#ff6ac1>?</span> <span style=color:#5af78e>&#39;&#39;</span> <span style=color:#ff6ac1>:</span> <span style=color:#5af78e>`icon-</span><span style=color:#5af78e>${</span>item.isCollapsed <span style=color:#ff6ac1>?</span> <span style=color:#5af78e>&#39;expander&#39;</span> <span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#39;collapser&#39;</span><span style=color:#5af78e>}</span><span style=color:#5af78e>`</span> <span style=color:#5af78e>}</span><span style=color:#5af78e>`</span>;
</span></span></code></pre></div></p></div></div><div class=post-line><p class=line-date>Feb 18, 2017</p><div><p class=line-title><a href=/section1/2017-02-18-hash/>java散列知识点总结</a></p><p class=line-summary><p>java 的根类 <code>Object</code> 具有 <code>hashcode</code> 方法。当 <code>equal</code> 方法被重写时也应当重写 <code>hashcode</code> 方法。</p><h2 class=heading id=基本数据类型的散列码>基本数据类型的散列码
<a href=#%e5%9f%ba%e6%9c%ac%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%a3%e5%88%97%e7%a0%81>#</a></h2><ul><li><code>byte</code> <code>short</code> <code>int</code> <code>char</code> 类型的搜索键将会转换为 <code>int</code>。</li><li><code>float</code> 类型的搜索键使用 <code>Float.floatToIntBits(key)</code> 作为散列码。</li><li><code>long</code> 类型的搜索键会进行折叠操作，如下：</li></ul><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>iny hashCode <span style=color:#ff6ac1>=</span> (<span style=color:#9aedfe>int</span>) (key <span style=color:#ff6ac1>^</span> (key <span style=color:#ff6ac1>&gt;&gt;</span> 32));
</span></span></code></pre></div><ul><li><code>double</code> 类型的搜索键会使用 <code>Double.doubleToLongBits(key)</code> 方法转换为 <code>long</code> 类型然后再进行折叠。</li></ul><h2 class=heading id=字符串类型的散列码>字符串类型的散列码
<a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%a3%e5%88%97%e7%a0%81>#</a></h2><p>对于字符串一般使用多项式散列码进行计算，</p><p><del>这里放个公式的图</del></p><p>b的较好取值为31，33，37，39，41。在 java String 类中 <code>b</code> 取31。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff5c57>public</span> <span style=color:#ff5c57>static</span> <span style=color:#9aedfe>int</span> <span style=color:#57c7ff>hash</span>(String key, <span style=color:#9aedfe>int</span> tableSize)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#9aedfe>int</span> hashVal <span style=color:#ff6ac1>=</span> 0;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>for</span> (<span style=color:#9aedfe>int</span> i <span style=color:#ff6ac1>=</span> 0; i <span style=color:#ff6ac1>&lt;</span> key.<span style=color:#57c7ff>length</span>(); i<span style=color:#ff6ac1>++</span>)
</span></span><span style=display:flex><span>        hashVal <span style=color:#ff6ac1>=</span> 37<span style=color:#ff6ac1>*</span>hashVal <span style=color:#ff6ac1>+</span> key.<span style=color:#57c7ff>charAt</span>(i);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    hashVal <span style=color:#ff6ac1>%=</span> tableSize;
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>if</span> (hashVal <span style=color:#ff6ac1>&lt;</span> 0)
</span></span><span style=display:flex><span>        hashVal <span style=color:#ff6ac1>+=</span> tableSize;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> hashVal;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 class=heading id=压缩散列码>压缩散列码
<a href=#%e5%8e%8b%e7%bc%a9%e6%95%a3%e5%88%97%e7%a0%81>#</a></h2><p>由于散列码可能是很大的正数，通常应该对其进行压缩以防止超出索引的范围。若索引范围为 <code>0 ~ n - 1</code> ，通常的做法是 <code>h(hashCode) = hashCode % N</code> ，选择N为大于2的素数。
<code>java.util.HashMap</code> 的实现中，将N设置为2的幂值，这样可以使用位运算代替上述的取模：<code>h(hashCode) = hashCode & (N - 1)</code> ，两者是完全等价的。</p></p></div></div><div class=post-line><p class=line-date>Jan 11, 2017</p><div><p class=line-title><a href=/section1/2017-01-11-php-lambada/>php的闭包特性</a></p><p class=line-summary><p>闭包和匿名函数在<code>PHP 5.3.0</code>引入，并且PHP将两者视为相同的概念。闭包其实是伪装成函数的对象，它的实质其实是<code>Closure</code>实例。</p><p>创建闭包非常简单：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff5c57>$c</span> <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>function</span>(<span style=color:#ff5c57>$name</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> sprintf(<span style=color:#5af78e>&#34;Hello World! Hello %s!&#34;</span>, <span style=color:#ff5c57>$name</span>);
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>echo</span> <span style=color:#ff5c57>$c</span>(<span style=color:#5af78e>&#39;PHP&#39;</span>);
</span></span></code></pre></div><p>使用<code>use</code>对闭包附加状态，多个参数使用<code>,</code>分隔：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff6ac1>function</span> <span style=color:#57c7ff>callPerson</span>(<span style=color:#ff5c57>$name</span>) {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> <span style=color:#ff6ac1>function</span>(<span style=color:#ff5c57>$about</span>) <span style=color:#ff6ac1>use</span> (<span style=color:#ff5c57>$name</span>) {
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>return</span> sprintf(<span style=color:#5af78e>&#34;%s, %s&#34;</span>, <span style=color:#ff5c57>$name</span>, <span style=color:#ff5c57>$about</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>$triver</span> <span style=color:#ff6ac1>=</span> callPerson(<span style=color:#5af78e>&#39;Triver&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#ff6ac1>echo</span> <span style=color:#ff5c57>$triver</span>(<span style=color:#5af78e>&#34;slow down, please!!&#34;</span>);
</span></span></code></pre></div><p>附加的变量会被封装到闭包内，即使返回的闭包队形已经跳出了<code>callPerson()</code>的作用域也仍然会记住<code>$name</code>的值。</p><p>闭包有一个有趣的<code>bindTo()</code>方法，可以将闭包的内部状态绑定到其他对象上，第二个参数指定了绑定闭包的对象所属的类，从而实现在闭包中访问绑定对象的私有方法和属性。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>Bind</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>protected</span> <span style=color:#ff5c57>$name</span> <span style=color:#ff6ac1>=</span> <span style=color:#5af78e>&#39;no name&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>public</span> <span style=color:#ff5c57>$change</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>public</span> <span style=color:#ff6ac1>function</span> <span style=color:#57c7ff>addAction</span>(<span style=color:#ff5c57>$action</span>) {
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>$this</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>change</span> <span style=color:#ff6ac1>=</span> <span style=color:#ff5c57>$action</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>bindTo</span>(<span style=color:#ff5c57>$this</span>, <span style=color:#ff9f43>__CLASS__</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>$bind</span> <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>new</span> Bind();
</span></span><span style=display:flex><span><span style=color:#ff5c57>$bind</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>addAction</span>(<span style=color:#ff6ac1>function</span>() {
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>$this</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>name</span> <span style=color:#ff6ac1>=</span> <span style=color:#5af78e>&#34;php&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> <span style=color:#ff5c57>$this</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>name</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>$change</span> <span style=color:#ff6ac1>=</span> <span style=color:#ff5c57>$bind</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>change</span>;
</span></span><span style=display:flex><span><span style=color:#ff6ac1>echo</span> <span style=color:#ff5c57>$change</span>();
</span></span></code></pre></div><p>使用这个特性可以方便的为类添加方法并绑定：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#ff6ac1>trait</span> MetaTrait
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#78787e>//定义$methods数组,用于保存方法（函数）的名字和地址。
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    <span style=color:#ff6ac1>private</span> <span style=color:#ff5c57>$methods</span> <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>array</span>();
</span></span><span style=display:flex><span>    <span style=color:#78787e>//定义addMethod方法，使用闭包类绑定匿名函数。
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    <span style=color:#ff6ac1>public</span> <span style=color:#ff6ac1>function</span> <span style=color:#57c7ff>addMethod</span>(<span style=color:#ff5c57>$methodName</span>, <span style=color:#ff5c57>$methodCallable</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>if</span> (<span style=color:#ff6ac1>!</span>is_callable(<span style=color:#ff5c57>$methodCallable</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>throw</span> <span style=color:#ff6ac1>new</span> InvalidArgumentException(<span style=color:#5af78e>&#39;Second param must be callable&#39;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>$this</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>methods</span>[<span style=color:#ff5c57>$methodName</span>] <span style=color:#ff6ac1>=</span> Closure<span style=color:#ff6ac1>::</span><span style=color:#57c7ff>bind</span>(<span style=color:#ff5c57>$methodCallable</span>, <span style=color:#ff5c57>$this</span>, get_class());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#78787e>//方法重载。为了避免当调用的方法不存在时产生错误，
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    <span style=color:#78787e>//可以使用 __call() 方法来避免。
</span></span></span><span style=display:flex><span><span style=color:#78787e></span>    <span style=color:#ff6ac1>public</span> <span style=color:#ff6ac1>function</span> __call(<span style=color:#ff5c57>$methodName</span>, <span style=color:#ff6ac1>array</span> <span style=color:#ff5c57>$args</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>if</span> (isset(<span style=color:#ff5c57>$this</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>methods</span>[<span style=color:#ff5c57>$methodName</span>])) {
</span></span><span style=display:flex><span>            <span style=color:#ff6ac1>return</span> call_user_func_array(<span style=color:#ff5c57>$this</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>methods</span>[<span style=color:#ff5c57>$methodName</span>], <span style=color:#ff5c57>$args</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>throw</span> RunTimeException(<span style=color:#5af78e>&#39;There is no method with the given name to call&#39;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>HackThursday</span> {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>use</span> MetaTrait;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>private</span> <span style=color:#ff5c57>$dayOfWeek</span> <span style=color:#ff6ac1>=</span> <span style=color:#5af78e>&#39;Thursday&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>$test</span> <span style=color:#ff6ac1>=</span> <span style=color:#ff6ac1>new</span> HackThursday();
</span></span><span style=display:flex><span><span style=color:#ff5c57>$test</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>addMethod</span>(<span style=color:#5af78e>&#39;when&#39;</span>, <span style=color:#ff6ac1>function</span> () {
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>return</span> <span style=color:#ff5c57>$this</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>dayOfWeek</span>;
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>echo</span> <span style=color:#ff5c57>$test</span><span style=color:#ff6ac1>-&gt;</span><span style=color:#57c7ff>when</span>();
</span></span></code></pre></div><p>php7 中增加了 <code>Closure::call()</code> 方法，可以更高效的绑定对象作用域并调用。</p></p></div></div><div class=post-line><p class=line-date>Dec 8, 2016</p><div><p class=line-title><a href=/section1/2016-12-08-ruby-notes/>ruby学习笔记</a></p><p class=line-summary><h2 class=heading id=regular-expressions>regular expressions
<a href=#regular-expressions>#</a></h2><p><code>=~</code>是用于正则表达式的匹配操作符。返回匹配到的字符串位置或nil。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#5af78e>&#34;abcdef&#34;</span> <span style=color:#ff6ac1>=~</span> <span style=color:#5af78e>/d/</span> <span style=color:#78787e># return 3</span>
</span></span><span style=display:flex><span><span style=color:#5af78e>&#34;aaaaaa&#34;</span> <span style=color:#ff6ac1>=~</span> <span style=color:#5af78e>/d/</span> <span style=color:#78787e># return nil</span>
</span></span></code></pre></div><h2 class=heading id=和>!和?
<a href=#%e5%92%8c>#</a></h2><p>The exclamation point (!, sometimes pronounced aloud as &ldquo;bang!&rdquo;) indicates something potentially destructive, that is to say, something that can change the value of what it touches.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ruby&gt; s1 = &#34;forth&#34;
</span></span><span style=display:flex><span>  &#34;forth&#34;
</span></span><span style=display:flex><span>ruby&gt; s1.chop!       # This changes s1.
</span></span><span style=display:flex><span>  &#34;fort&#34;
</span></span><span style=display:flex><span>ruby&gt; s2 = s1.chop   # This puts a changed copy in s2,
</span></span><span style=display:flex><span>  &#34;for&#34;
</span></span><span style=display:flex><span>ruby&gt; s1             # ... without disturbing s1.
</span></span><span style=display:flex><span>  &#34;fort&#34;
</span></span></code></pre></div><p>You&rsquo;ll also sometimes see chomp and chomp! used. These are more selective: the end of a string gets bit off only if it happens to be a newline.</p></p></div></div><div class=post-line><p class=line-date>Nov 29, 2016</p><div><p class=line-title><a href=/section1/2016-11-29-iptables-usage/>netfilter/iptables 笔记</a></p><p class=line-summary><h2 class=heading id=netfilter-与-iptables>netfilter 与 iptables
<a href=#netfilter-%e4%b8%8e-iptables>#</a></h2><p><code>netfilter</code>是linux默认的防火墙，在2.4之后的版本正式进入内核。<code>netfilter</code> 使用四个表(Table)来存放控制信息包过滤处理的规则集。每张表由链(Chain)组成，每条链又包含了多条规则(rule)。</p><p><code>iptables</code>是用来编辑操作这些表的一个工具。<code>iptables</code>包中也包含了针对IPv6的工具<code>ip6tables</code>。</p><p>四个表及其包含的链：</p><ul><li>filter<ul><li>INPUT</li><li>FORWARD</li><li>OUTPUT</li></ul></li><li>nat<ul><li>PREROUTING</li><li>POSTROUTING</li><li>OUTPUT</li></ul></li><li>mangle<ul><li>PREROUTING</li><li>INPUT</li><li>FORWARD</li><li>OUTPUT</li><li>POSTROUTING</li></ul></li><li>raw<ul><li>PREROUTING</li><li>OUTPUT</li></ul></li></ul><p><figure><div><img loading=lazy alt=img src=/img/2016-11-29-iptables-usage_1.png></div></figure></p><h3 class=heading id=filter机制>filter机制
<a href=#filter%e6%9c%ba%e5%88%b6>#</a></h3><p><code>filter</code>是<code>netfilter</code>中最重要的机制，其任务是执行数据包的过滤操作。具有三种内建链：</p><ul><li>INPUT - 来自外部的数据包（访问本机）</li><li>OUTPUT - 发往外部的数据包（本机访问外部）</li><li>FORWORD - “路过”本机的数据包，转发到其他设备</li></ul><p>链中规则的匹配方式遵循<code>first match</code>。<code>filter</code>会根据数据包特征从相应链中的第一条规则开始逐一进行匹配。只要遇到满足特征的规则后便不再继续。
每条链在最底端都定义了默认规则。默认规则只会有一种状态：<code>ACCEPT</code>或者<code>DROP</code>。默认为<code>ACCEPT</code>。</p><h2 class=heading id=iptables命令参数>iptables命令参数
<a href=#iptables%e5%91%bd%e4%bb%a4%e5%8f%82%e6%95%b0>#</a></h2><p>格式：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span><span style=color:#ff5c57>操作方式</span> [<span style=color:#ff5c57>链名</span>] [<span style=color:#ff5c57>条件匹配</span>] [<span style=color:#ff5c57>选项</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>[ACD] chain rule<span style=color:#ff6ac1>-</span>specification [options]
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>I chain [rulenum] rule<span style=color:#ff6ac1>-</span>specification [options]
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>R chain rulenum rule<span style=color:#ff6ac1>-</span>specification [options]
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>D chain rulenum [options]
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>[LS] [chain [rulenum]] [options]
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>[FZ] [chain] [options]
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>[NX] chain
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>E old<span style=color:#ff6ac1>-</span>chain<span style=color:#ff6ac1>-</span>name new<span style=color:#ff6ac1>-</span>chain<span style=color:#ff6ac1>-</span>name
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>P chain target [options]
</span></span><span style=display:flex><span>iptables <span style=color:#ff6ac1>-</span>h (<span style=color:#ff5c57>print</span> this help information)
</span></span></code></pre></div><p>常用操作方式：</p></p></div></div><div class=pagination><div class=pagination-control><a href=http://localhost:1313/section1/>&lt;</a></div><div class=page-number><p>2/3</p></div><div class=pagination-control><a href=http://localhost:1313/section1/page/3/>></a></div></div></div></main></div><footer><div class=footer><p>© 2024 <a href=https://github.com/loyistro/Beige>loyistro/beige</a> theme</p></div></footer></body><script>function isAuto(){return document.body.classList.contains("auto")}function setTheme(){if(!isAuto())return;document.body.classList.remove("auto");let e="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),document.body.classList.add(e)}function invertBody(){document.body.classList.toggle("dark"),document.body.classList.toggle("light")}isAuto()&&window.matchMedia("(prefers-color-scheme: dark)").addListener(invertBody),setTheme()</script></html>