<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=icon type=image/ico href=http://localhost:1313/favicon//favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon//favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon//favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=http://localhost:1313/favicon//android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=http://localhost:1313/favicon//apple-touch-icon.png><meta name=description content><title>ruby学习笔记 | My website
</title><link rel=canonical href=http://localhost:1313/section1/2016-12-08-ruby-notes/><meta property="og:url" content="http://localhost:1313/section1/2016-12-08-ruby-notes/"><meta property="og:site_name" content="My website"><meta property="og:title" content="ruby学习笔记"><meta property="og:description" content="ruby学习笔记"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="section1"><meta property="article:published_time" content="2016-12-08T22:54:49+00:00"><meta property="article:modified_time" content="2016-12-08T22:54:49+00:00"><meta property="article:tag" content="Ruby"><link rel=stylesheet href=/assets/combined.min.62aff66979247a1b5e392fcf9478bf991706318006fd4838ce8e5a35bd7fa736.css media=all></head><body class=auto><div class=content><header><div class=header><h1 class=header-title><a href=http://localhost:1313/ style=display:flex;align-items:center><img src=/favicon/apple-touch-icon.png alt=Icon height=40>
<span>Home Title</span></a></h1><div class="menu flex"><p class=menu-item><a href=http://localhost:1313/>/home</a></p><p class=menu-item><a href=http://localhost:1313/section1/>/Section1</a></p><p class=menu-item><a href=http://localhost:1313/section2/>/Section2</a></p><p class=menu-item><a href=http://localhost:1313/about>/about</a></p></div><hr></header><main class=main><div class=breadcrumbs><a href=/>Home</a>
<span class=breadcrumbs-separator>> </span><a href=/section1/>Section 1</a>
<span class=breadcrumbs-separator>> </span><a class=breadcrumbs-current href=/section1/2016-12-08-ruby-notes/>ruby学习笔记</a></div><div class=autonumber><div class=single-intro-container><h1 class=single-title>ruby学习笔记</h1><p class=single-summary>ruby学习笔记</p><p class=single-readtime><time datetime=2016-12-08T22:54:49+00:00>Dec 8, 2016</time>
&nbsp; · &nbsp;
4 min read
&nbsp; · &nbsp;
<span class=single-tags><a href=/tags/ruby/>#Ruby</a></span></p></div><aside class=toc><p><strong>Table of contents</strong></p><nav id=TableOfContents><ul><li><a href=#regular-expressions>regular expressions</a></li><li><a href=#和>!和?</a></li><li><a href=#四种内部中断循环的方式>四种内部中断循环的方式</a></li><li><a href=#迭代器-iterator>迭代器 iterator</a><ul><li><a href=#yield>yield</a></li></ul></li><li><a href=#class>class</a><ul><li><a href=#继承>继承</a></li><li><a href=#初始化构造函数>初始化（构造函数）</a></li></ul></li><li><a href=#variables>variables</a><ul><li><a href=#全局变量>全局变量</a></li><li><a href=#实例变量>实例变量</a></li><li><a href=#常量>常量</a></li></ul></li><li><a href=#访问器accessor>访问器(accessor)</a><ul><li><a href=#inspect方法>inspect方法</a></li><li><a href=#shortcuts>shortcuts</a></li></ul></li><li><a href=#注释>注释</a></li><li><a href=#dynamic-dispatch>Dynamic Dispatch</a></li><li><a href=#mixins>Mixins</a><ul><li><a href=#lookup-rulres>Lookup rulres</a></li></ul></li></ul></nav></aside><div class=single-content><h2 class=heading id=regular-expressions>regular expressions
<a href=#regular-expressions>#</a></h2><p><code>=~</code>是用于正则表达式的匹配操作符。返回匹配到的字符串位置或nil。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#5af78e>&#34;abcdef&#34;</span> <span style=color:#ff6ac1>=~</span> <span style=color:#5af78e>/d/</span> <span style=color:#78787e># return 3</span>
</span></span><span style=display:flex><span><span style=color:#5af78e>&#34;aaaaaa&#34;</span> <span style=color:#ff6ac1>=~</span> <span style=color:#5af78e>/d/</span> <span style=color:#78787e># return nil</span>
</span></span></code></pre></div><h2 class=heading id=和>!和?
<a href=#%e5%92%8c>#</a></h2><p>The exclamation point (!, sometimes pronounced aloud as &ldquo;bang!&rdquo;) indicates something potentially destructive, that is to say, something that can change the value of what it touches.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ruby&gt; s1 = &#34;forth&#34;
</span></span><span style=display:flex><span>  &#34;forth&#34;
</span></span><span style=display:flex><span>ruby&gt; s1.chop!       # This changes s1.
</span></span><span style=display:flex><span>  &#34;fort&#34;
</span></span><span style=display:flex><span>ruby&gt; s2 = s1.chop   # This puts a changed copy in s2,
</span></span><span style=display:flex><span>  &#34;for&#34;
</span></span><span style=display:flex><span>ruby&gt; s1             # ... without disturbing s1.
</span></span><span style=display:flex><span>  &#34;fort&#34;
</span></span></code></pre></div><p>You&rsquo;ll also sometimes see chomp and chomp! used. These are more selective: the end of a string gets bit off only if it happens to be a newline.</p><p>The other method naming convention is the question mark (?, sometimes pronounced aloud as &ldquo;huh?&rdquo;) indicates a &ldquo;predicate&rdquo; method, one that can return either true or false.</p><h2 class=heading id=四种内部中断循环的方式>四种内部中断循环的方式
<a href=#%e5%9b%9b%e7%a7%8d%e5%86%85%e9%83%a8%e4%b8%ad%e6%96%ad%e5%be%aa%e7%8e%af%e7%9a%84%e6%96%b9%e5%bc%8f>#</a></h2><ul><li><code>break</code></li><li><code>next</code> 等同与continue</li><li><code>redo</code> restarts the current iteration</li><li><code>return</code></li></ul><h2 class=heading id=迭代器-iterator>迭代器 iterator
<a href=#%e8%bf%ad%e4%bb%a3%e5%99%a8-iterator>#</a></h2><p>Ruby&rsquo;s String type has some useful iterators. <code>each_byte</code> is an iterator for each character in the string.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>irb<span style=color:#ff6ac1>(</span>main<span style=color:#ff6ac1>)</span>:001:0&gt; <span style=color:#5af78e>&#34;abc&#34;</span>.each_byte<span style=color:#ff6ac1>{</span>|c| <span style=color:#ff5c57>printf</span> <span style=color:#5af78e>&#34;&lt;%c&gt;&#34;</span>, c<span style=color:#ff6ac1>}</span>; print <span style=color:#5af78e>&#34;\n&#34;</span>
</span></span><span style=display:flex><span>&lt;a&gt;&lt;b&gt;&lt;c&gt;
</span></span><span style=display:flex><span><span style=color:#ff6ac1>=</span>&gt; nil
</span></span></code></pre></div><p>Another iterator of String is <code>each_line</code>.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>irb<span style=color:#ff6ac1>(</span>main<span style=color:#ff6ac1>)</span>:002:0&gt; <span style=color:#5af78e>&#34;a\nb\nc\n&#34;</span>.each_line<span style=color:#ff6ac1>{</span>|l| print l<span style=color:#ff6ac1>}</span>
</span></span><span style=display:flex><span>a
</span></span><span style=display:flex><span>b
</span></span><span style=display:flex><span><span style=color:#ff5c57>c</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>=</span>&gt; <span style=color:#5af78e>&#34;a\nb\nc\n&#34;</span>
</span></span></code></pre></div><p>ruby的 <code>for in</code> 也是一种迭代。We can use a control structure <code>retry</code> in conjunction with an iterated loop, and it will retry the loop from the beginning.</p><h3 class=heading id=yield>yield
<a href=#yield>#</a></h3><p><code>yield</code> occurs sometimes in a definition of an iterator. <code>yield</code> moves control to the block of code that is passed to the iterator (this will be explored in more detail in the chapter about procedure objects). The following example defines an iterator repeat, which repeats a block of code the number of times specified in an argument.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>irb(main):<span style=color:#ff9f43>003</span>:<span style=color:#ff9f43>0</span><span style=color:#ff6ac1>&gt;</span> <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>repeat</span>(num)
</span></span><span style=display:flex><span>irb(main):<span style=color:#ff9f43>004</span>:<span style=color:#ff9f43>1</span><span style=color:#ff6ac1>&gt;</span>     <span style=color:#ff6ac1>while</span> num <span style=color:#ff6ac1>&gt;</span> <span style=color:#ff9f43>0</span>
</span></span><span style=display:flex><span>irb(main):<span style=color:#ff9f43>005</span>:<span style=color:#ff9f43>2</span><span style=color:#ff6ac1>&gt;</span>         <span style=color:#ff6ac1>yield</span>
</span></span><span style=display:flex><span>irb(main):<span style=color:#ff9f43>006</span>:<span style=color:#ff9f43>2</span><span style=color:#ff6ac1>&gt;</span>         num <span style=color:#ff6ac1>-=</span> <span style=color:#ff9f43>1</span>
</span></span><span style=display:flex><span>irb(main):<span style=color:#ff9f43>007</span>:<span style=color:#ff9f43>2</span><span style=color:#ff6ac1>&gt;</span>     <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>irb(main):<span style=color:#ff9f43>00</span><span style=color:#ff9f43>8</span>:<span style=color:#ff9f43>1</span><span style=color:#ff6ac1>&gt;</span> <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>=&gt;</span> <span style=color:#5af78e>:repeat</span>
</span></span><span style=display:flex><span>irb(main):<span style=color:#ff9f43>00</span><span style=color:#ff9f43>9</span>:<span style=color:#ff9f43>0</span><span style=color:#ff6ac1>&gt;</span> repeat(<span style=color:#ff9f43>3</span>) { <span style=color:#ff5c57>puts</span> <span style=color:#5af78e>&#34;foo&#34;</span> }
</span></span><span style=display:flex><span>foo
</span></span><span style=display:flex><span>foo
</span></span><span style=display:flex><span>foo
</span></span><span style=display:flex><span><span style=color:#ff6ac1>=&gt;</span> <span style=color:#ff6ac1>nil</span>
</span></span></code></pre></div><h2 class=heading id=class>class
<a href=#class>#</a></h2><h3 class=heading id=继承>继承
<a href=#%e7%bb%a7%e6%89%bf>#</a></h3><p>继承的格式为:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>Superclass</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>breathe</span>
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>puts</span> <span style=color:#5af78e>&#34;inhale and exhale&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>identify</span>
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>puts</span> <span style=color:#5af78e>&#34;I&#39;m super&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>speak</span>(word)
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>puts</span> word
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>Subclass</span><span style=color:#ff6ac1>&lt;</span><span style=color:#ff9f43>Superclass</span>
</span></span><span style=display:flex><span>    <span style=color:#78787e># code...</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>end</span>
</span></span></code></pre></div><p>可在在子类中重新声明基类方法，也可以使用<code>super</code>关键字来扩展基类方法。<code>super</code>也允许我们传递参数给基类方法。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>Subclass</span><span style=color:#ff6ac1>&lt;</span><span style=color:#ff9f43>Superclass</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>identify</span>
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>super</span>
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>puts</span> <span style=color:#5af78e>&#34;I&#39;m sub too&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>speak</span>(word)
</span></span><span style=display:flex><span>        <span style=color:#ff6ac1>super</span>(<span style=color:#5af78e>&#34;this is from Superclass&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>puts</span> <span style=color:#5af78e>&#34;now it&#39;s from Subclass: </span><span style=color:#5af78e>#{</span>word<span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>end</span>
</span></span></code></pre></div><h3 class=heading id=初始化构造函数>初始化（构造函数）
<a href=#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0>#</a></h3><p><code>ruby</code>使用<code>initialize</code>关键字来实现构造函数的功能。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>Fruit</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>initialize</span>( k<span style=color:#ff6ac1>=</span><span style=color:#5af78e>&#34;apple&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>@kind</span> <span style=color:#ff6ac1>=</span> k
</span></span><span style=display:flex><span>        <span style=color:#ff5c57>@condition</span> <span style=color:#ff6ac1>=</span> <span style=color:#5af78e>&#34;ripe&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apple <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>Fruit</span><span style=color:#ff6ac1>.</span>new <span style=color:#5af78e>&#34;apple&#34;</span>
</span></span></code></pre></div><h2 class=heading id=variables>variables
<a href=#variables>#</a></h2><ul><li><code>[a-z] or _</code> 本地变量</li><li><code>$</code> 全局变量</li><li><code>@</code> 实例变量 instance variable</li><li><code>[A-Z]</code> 常量</li></ul><h3 class=heading id=全局变量>全局变量
<a href=#%e5%85%a8%e5%b1%80%e5%8f%98%e9%87%8f>#</a></h3><p>全局变量以 <code>$</code> 开头。初始化之前，全局变量的值为<code>nil</code>。可定义一段procedure来追踪全局变量。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff5c57>$x</span> <span style=color:#78787e>#return nil</span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>trace_var</span> :<span style=color:#ff5c57>$x</span>, <span style=color:#ff5c57>proc</span>{<span style=color:#ff5c57>puts</span> <span style=color:#5af78e>&#34;$x is now </span><span style=color:#5af78e>#{</span><span style=color:#ff5c57>$x</span><span style=color:#5af78e>}</span><span style=color:#5af78e>&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#ff5c57>$x</span> <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>5</span> <span style=color:#78787e>#return $x is now 5</span>
</span></span></code></pre></div><p>一些特殊的变量（不一定是全局作用域）：</p><ul><li><code>$!</code> latest error message</li><li><code>$@</code> location of error</li><li><code>$_</code> 上一次由gets读入的字符串</li><li><code>$.</code> line number last read by interpreter</li><li><code>$&</code> string last matched by regexp</li><li><code>$~</code> the last regexp match, as an array of subexpressions</li><li><code>$n</code> the nth subexpression in the last match (same as $~[n])</li><li><code>$=</code> case-insensitivity flag</li><li><code>$/</code> input record separator</li><li><code>$\</code> output record separator</li><li><code>$0</code> the name of the ruby script file</li><li><code>$*</code> 命令行参数</li><li><code>$$</code> 当前解释器的进程id</li><li><code>$?</code> 上一次子进程的退出状态码</li></ul><h3 class=heading id=实例变量>实例变量
<a href=#%e5%ae%9e%e4%be%8b%e5%8f%98%e9%87%8f>#</a></h3><p>An instance variable has a name beginning with <code>@</code>, and its scope is confined to whatever object <strong>self</strong> refers to. Two different objects, even if they belong to the same class, are allowed to have different values for their instance variables. From outside the object, instance variables <strong>cannot be altered or even observed</strong> (i.e., ruby&rsquo;s instance variables are never public) except by whatever methods are explicitly provided by the programmer. As with globals, instance variables have the nil value until they are initialized.</p><p>Instance variables do not need to be declared. This indicates a flexible object structure; in fact, each instance variable is dynamically appended to an object when it is first assigned.</p><h3 class=heading id=常量>常量
<a href=#%e5%b8%b8%e9%87%8f>#</a></h3><p>常量名以大写字母开头。给常量重新赋值会得到警告。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>irb<span style=color:#ff6ac1>(</span>main<span style=color:#ff6ac1>)</span>:009:0&gt; <span style=color:#ff5c57>Wzr</span><span style=color:#ff6ac1>=</span><span style=color:#ff5c57>1222</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>=</span>&gt; <span style=color:#ff9f43>1222</span>
</span></span><span style=display:flex><span>irb<span style=color:#ff6ac1>(</span>main<span style=color:#ff6ac1>)</span>:010:0&gt; <span style=color:#ff5c57>Wzr</span><span style=color:#ff6ac1>=</span><span style=color:#ff9f43>1223</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>(</span>irb<span style=color:#ff6ac1>)</span>:10: warning: already initialized constant Wzr
</span></span><span style=display:flex><span><span style=color:#ff6ac1>(</span>irb<span style=color:#ff6ac1>)</span>:9: warning: previous definition of Wzr was <span style=color:#ff5c57>here</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>=</span>&gt; <span style=color:#ff9f43>1223</span>
</span></span></code></pre></div><p>常量可以在类和模块中定义，并允许外部访问。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>ConstClass</span>
</span></span><span style=display:flex><span>   <span style=color:#ff9f43>C1</span><span style=color:#ff6ac1>=</span><span style=color:#ff9f43>120</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff9f43>ConstClass</span><span style=color:#ff6ac1>::</span><span style=color:#ff9f43>C1</span> <span style=color:#78787e># return 120</span>
</span></span></code></pre></div><h2 class=heading id=访问器accessor>访问器(accessor)
<a href=#%e8%ae%bf%e9%97%ae%e5%99%a8accessor>#</a></h2><p>实例属性需要通过属性访问器访问。常规访问器有简化写法：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>Fruit</span>
</span></span><span style=display:flex><span>   <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>kind</span><span style=color:#ff6ac1>=</span>(k)
</span></span><span style=display:flex><span>       <span style=color:#ff5c57>@kind</span> <span style=color:#ff6ac1>=</span> k
</span></span><span style=display:flex><span>   <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span>   <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>kind</span>
</span></span><span style=display:flex><span>       <span style=color:#ff5c57>@kind</span>
</span></span><span style=display:flex><span>   <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span> <span style=color:#ff6ac1>end</span>
</span></span></code></pre></div><h3 class=heading id=inspect方法>inspect方法
<a href=#inspect%e6%96%b9%e6%b3%95>#</a></h3><p>当创建一个对象时解释器会返回一些信息：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>irb(main):<span style=color:#ff9f43>00</span><span style=color:#ff9f43>9</span>:<span style=color:#ff9f43>0</span><span style=color:#ff6ac1>&gt;</span> apple <span style=color:#ff6ac1>=</span> <span style=color:#ff9f43>Fruit</span><span style=color:#ff6ac1>.</span>new
</span></span><span style=display:flex><span><span style=color:#ff6ac1>=&gt;</span> <span style=color:#78787e>#&lt;Fruit:0x00000000a34f58&gt;</span>
</span></span><span style=display:flex><span>irb(main):<span style=color:#ff9f43>010</span>:<span style=color:#ff9f43>0</span><span style=color:#ff6ac1>&gt;</span>
</span></span></code></pre></div><p>可以通过<code>inspect</code>关键字来改变这种默认行为。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff6ac1>class</span> <span style=color:#f3f99d>Fruit</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>def</span> <span style=color:#57c7ff>inspect</span>
</span></span><span style=display:flex><span>        <span style=color:#5af78e>&#34;a fruit is created&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff6ac1>end</span>
</span></span><span style=display:flex><span><span style=color:#ff6ac1>end</span>
</span></span></code></pre></div><p><code>inspect</code>方法常用来调试，可通过下面两种方式显示调用：</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#ff5c57>p</span> anObject
</span></span><span style=display:flex><span><span style=color:#ff5c57>puts</span> anObject<span style=color:#ff6ac1>.</span>inspect
</span></span></code></pre></div><h3 class=heading id=shortcuts>shortcuts
<a href=#shortcuts>#</a></h3><p><code>Ruby</code>提供了访问器的一些简写形式：</p><table><thead><tr><th style=text-align:center>缩写</th><th style=text-align:center>效果</th></tr></thead><tbody><tr><td style=text-align:center>attr_reader :v</td><td style=text-align:center>def v; @v; end</td></tr><tr><td style=text-align:center>attr_writer :v</td><td style=text-align:center>def v=(value); @v=value; end</td></tr><tr><td style=text-align:center>attr_accessor :v</td><td style=text-align:center>attr_reader :v; attr_writer :v</td></tr><tr><td style=text-align:center>attr_accessor :v, :w</td><td style=text-align:center>attr_accessor :v; attr_accessor :w</td></tr></tbody></table><h2 class=heading id=注释>注释
<a href=#%e6%b3%a8%e9%87%8a>#</a></h2><p>单行注释以<code>#</code>开头。
块注释可使用<code>=begin</code> <code>=end</code>来标记。</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#78787e>=begin
</span></span></span><span style=display:flex><span><span style=color:#78787e>这是一段注释块。This is a comment block.
</span></span></span><span style=display:flex><span><span style=color:#78787e>Egg, I dreamed I was old.
</span></span></span><span style=display:flex><span><span style=color:#78787e>=end</span>
</span></span></code></pre></div><h2 class=heading id=dynamic-dispatch>Dynamic Dispatch
<a href=#dynamic-dispatch>#</a></h2><h2 class=heading id=mixins>Mixins
<a href=#mixins>#</a></h2><p>Ruby has no multiple inheritance. But it has mixins.</p><h3 class=heading id=lookup-rulres>Lookup rulres
<a href=#lookup-rulres>#</a></h3><p>When looking for receiver obj&rsquo;s method m,</p><ul><li>look in obj&rsquo;s class</li><li>look in mixins the class includes(later includes shadow)</li><li>look in obj&rsquo;s superclass</li><li>look in mixins the superclass inculdes</li><li>&mldr;</li></ul></div><div class=single-pagination><hr><div class=flex><div class=single-pagination-prev><div class=single-pagination-container-prev><div class=single-pagination-text>←</div><div class=single-pagination-text><a href=/section1/2016-11-29-iptables-usage/>netfilter/iptables 笔记</a></div></div></div><div class=single-pagination-next><div class=single-pagination-container-next><div class=single-pagination-text><a href=/section1/2017-01-11-php-lambada/>php的闭包特性</a></div><div class=single-pagination-text>→</div></div></div></div><hr></div><div class=back-to-top><a href=#top>↑ Back to top</a></div></div></main></div><footer><div class=footer><p>© 2024 <a href=https://github.com/loyistro/Beige>loyistro/beige</a> theme</p></div></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></body><script>function isAuto(){return document.body.classList.contains("auto")}function setTheme(){if(!isAuto())return;document.body.classList.remove("auto");let e="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),document.body.classList.add(e)}function invertBody(){document.body.classList.toggle("dark"),document.body.classList.toggle("light")}isAuto()&&window.matchMedia("(prefers-color-scheme: dark)").addListener(invertBody),setTheme()</script></html>