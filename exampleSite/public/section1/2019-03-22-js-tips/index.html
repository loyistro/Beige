<!doctype html><html lang=en-us dir=ltr><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=stylesheet href=/chroma/base16-snazzy.css><link rel=icon type=image/ico href=http://localhost:1313/favicon//favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon//favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon//favicon-32x32.png><link rel=icon type=image/png sizes=192x192 href=http://localhost:1313/favicon//android-chrome-192x192.png><link rel=apple-touch-icon sizes=180x180 href=http://localhost:1313/favicon//apple-touch-icon.png><meta name=description content><title>Js tips I can't remember | My website
</title><link rel=canonical href=http://localhost:1313/section1/2019-03-22-js-tips/><meta property="og:url" content="http://localhost:1313/section1/2019-03-22-js-tips/"><meta property="og:site_name" content="My website"><meta property="og:title" content="Js tips I can't remember"><meta property="og:description" content="__proto__ VS prototype # __proto__ is the actual object that is used in the lookup chain to resolve methods and others. prototype is the object that is used to build __proto__ when creating an object with new.
The “cool kids” in JavaScript would generally pronounce __proto__ as “dunder proto”.
https://stackoverflow.com/questions/9959727/proto-vs-prototype-in-javascript
( new Foo ).__proto__ === Foo.prototype; // true ( new Foo ).prototype === undefined; // true"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="section1"><meta property="article:published_time" content="2019-03-22T09:00:00+00:00"><meta property="article:modified_time" content="2019-03-22T09:00:00+00:00"><meta property="article:tag" content="JavaScript"><link rel=stylesheet href=/assets/combined.min.0562e3b380d451b64e18ee87c77b348e8d2cc91cb8d80c1413cc871800bedd0d.css media=all></head><body class=auto><div class=content><header><div class=header><h1 class=header-title><a href=http://localhost:1313/ style=display:flex;align-items:center><span>Gofun Theme</span></a></h1><div class="menu flex"><p class=menu-item><a href=http://localhost:1313/>/home</a></p><p class=menu-item><a href=http://localhost:1313/section1/>/Section1</a></p><p class=menu-item><a href=http://localhost:1313/section2/>/Section2</a></p></div><hr></header><main class=main><div class=breadcrumbs><a href=/>Home</a>
<span class=breadcrumbs-separator>/ </span><a href=/section1/>Section 1</a>
<span class=breadcrumbs-separator>/ </span><a class=breadcrumbs-current href=/section1/2019-03-22-js-tips/>Js tips I can't remember</a></div><div class=autonumber><div class=single-intro-container><h1 class=single-title>Js tips I can't remember</h1><p class=single-summary>Js tips I can&rsquo;t remember</p><p class=single-readtime><time datetime=2019-03-22T09:00:00+00:00>Mar 22, 2019</time>
&nbsp; · &nbsp;
3 min read
&nbsp; · &nbsp;
<span class=single-tags><a href=/tags/javascript/>#JavaScript</a></span></p></div><aside class=toc><p><strong>Table of contents</strong></p><nav id=TableOfContents><ul><li><a href=#__proto__-vs-prototype><code>__proto__</code> VS <code>prototype</code></a></li><li><a href=#-vs-objectcreatenull><code>{}</code> VS <code>Object.create(null)</code></a></li><li><a href=#computed-property-names>Computed Property Names</a></li><li><a href=#dangerous-functionprototypename-comparison>Dangerous <code>Function.prototype.name</code> comparison</a></li><li><a href=#a-more-robust-way-of-performing-object-property-check>A more robust way of performing object property check</a></li><li><a href=#forin-vs-forof><code>for...in</code> vs <code>for...of</code></a></li><li><a href=#prototypal-inheritance>&ldquo;(Prototypal) Inheritance&rdquo;</a></li></ul></nav></aside><div class=single-content><h2 class=heading id=__proto__-vs-prototype><code>__proto__</code> VS <code>prototype</code>
<a href=#__proto__-vs-prototype>#</a></h2><blockquote><p><code>__proto__</code> is the actual object that is used in the lookup chain to resolve methods and others. <code>prototype</code> is the object that is used to build <code>__proto__</code> when creating an object with <code>new</code>.</p></blockquote><blockquote><p>The &ldquo;cool kids&rdquo; in JavaScript would generally pronounce <code>__proto__</code> as &ldquo;<strong>dunder proto</strong>&rdquo;.</p></blockquote><p><a href=https://stackoverflow.com/questions/9959727/proto-vs-prototype-in-javascript>https://stackoverflow.com/questions/9959727/proto-vs-prototype-in-javascript</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=p>(</span> <span class=k>new</span> <span class=nx>Foo</span> <span class=p>).</span><span class=nx>__proto__</span> <span class=o>===</span> <span class=nx>Foo</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span> <span class=c1>// true
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>(</span> <span class=k>new</span> <span class=nx>Foo</span> <span class=p>).</span><span class=nx>prototype</span> <span class=o>===</span> <span class=kc>undefined</span><span class=p>;</span> <span class=c1>// true
</span></span></span></code></pre></div><h2 class=heading id=-vs-objectcreatenull><code>{}</code> VS <code>Object.create(null)</code>
<a href=#-vs-objectcreatenull>#</a></h2><p><code>Object.create(null)</code> can create a <em>&lsquo;pure&rsquo;</em> empty object that is without the delegation to <code>Object.prototype</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>obj1</span> <span class=o>=</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>obj2</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=kc>null</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>obj1</span><span class=p>.</span><span class=nx>__proto__</span><span class=p>);</span> <span class=c1>// {constructor: ƒ, __defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, …}
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>obj2</span><span class=p>.</span><span class=nx>__proto__</span><span class=p>);</span> <span class=c1>// undefined
</span></span></span></code></pre></div><h2 class=heading id=computed-property-names>Computed Property Names
<a href=#computed-property-names>#</a></h2><p>ES6 adds computed property names, which is helpful when declaring objects using the object-literal syntax.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>var</span> <span class=nx>prefix</span> <span class=o>=</span> <span class=s2>&#34;foo&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>myObject</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=p>[</span><span class=nx>prefix</span> <span class=o>+</span> <span class=s2>&#34;bar&#34;</span><span class=p>]</span><span class=o>:</span> <span class=s2>&#34;hello&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>[</span><span class=nx>prefix</span> <span class=o>+</span> <span class=s2>&#34;baz&#34;</span><span class=p>]</span><span class=o>:</span> <span class=s2>&#34;world&#34;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>myObject</span><span class=p>[</span><span class=s2>&#34;foobar&#34;</span><span class=p>];</span> <span class=c1>// hello
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>myObject</span><span class=p>[</span><span class=s2>&#34;foobaz&#34;</span><span class=p>];</span> <span class=c1>// world
</span></span></span></code></pre></div><h2 class=heading id=dangerous-functionprototypename-comparison>Dangerous <code>Function.prototype.name</code> comparison
<a href=#dangerous-functionprototypename-comparison>#</a></h2><p>Sometimes we may spectify a function by comparing the function name:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Foo</span><span class=p>()</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>foo</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Foo</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>foo</span><span class=p>.</span><span class=nx>constructor</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=s1>&#39;Foo&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;&#39;foo&#39; is an instance of &#39;Foo&#39;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Oops!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>It may behave unexpectedly after building because most build tools compress the code to forms like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>a</span><span class=p>()</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl><span class=kd>let</span> <span class=nx>b</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>a</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=p>(</span><span class=nx>b</span><span class=p>.</span><span class=nx>constructor</span><span class=p>.</span><span class=nx>name</span> <span class=o>===</span> <span class=s1>&#39;Foo&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;&#39;foo&#39; is an instance of &#39;Foo&#39;&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Oops!&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 class=heading id=a-more-robust-way-of-performing-object-property-check>A more robust way of performing object property check
<a href=#a-more-robust-way-of-performing-object-property-check>#</a></h2><p>Normally we use <code>hasOwnProperty()</code> checks to see if object has the property or not. But consider objects created by:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// this will not consult the [[Prototype]] chain
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>let</span> <span class=nx>obj</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span><span class=kc>null</span><span class=p>)</span>
</span></span></code></pre></div><p>Such object does not link to <code>Object.prototype</code>, thus <code>obj.hasOwnProperty(...)</code> would fail and raise error.</p><p>We can use a more robust way to perform property check:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nb>Object</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>hasOwnProperty</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span><span class=nx>obj</span><span class=p>,</span><span class=s2>&#34;a&#34;</span><span class=p>)</span> <span class=c1>//false
</span></span></span></code></pre></div><p>Or:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// this will check the current object or any higher level of the [[Prototype]] chain
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=s2>&#34;a&#34;</span> <span class=k>in</span> <span class=nx>obj</span>
</span></span></code></pre></div><h2 class=heading id=forin-vs-forof><code>for...in</code> vs <code>for...of</code>
<a href=#forin-vs-forof>#</a></h2><p>The <code>for..in</code> loop iterates over the list of enumerable properties on an object (including its <code>[[Prototype]]</code> chain).The <code>for...of</code> iterate over the values directly instead of the array indices (or object properties). It asks built-in or custom <code>@@iterator</code> of the thing to be iterated.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>let</span> <span class=nx>arr</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;a&#39;</span><span class=p>,</span> <span class=s1>&#39;b&#39;</span><span class=p>,</span> <span class=s1>&#39;c&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>arr</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=s1>&#39;foo&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>arr</span> <span class=c1>// [&#34;a&#34;, &#34;b&#34;, &#34;c&#34;, name: &#34;foo&#34;]
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=nx>key</span> <span class=k>in</span> <span class=nx>arr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>key</span><span class=p>)</span> <span class=c1>// 0 1 2 name
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=nx>value</span> <span class=k>of</span> <span class=nx>arr</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>value</span><span class=p>)</span> <span class=c1>// a b c
</span></span></span></code></pre></div><h2 class=heading id=prototypal-inheritance>&ldquo;(Prototypal) Inheritance&rdquo;
<a href=#prototypal-inheritance>#</a></h2><p>When writing &ldquo;prototype style&rdquo; code like implementing Parent-Child class inheritance:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Foo</span><span class=p>(</span><span class=nx>name</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>name</span> <span class=o>=</span> <span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>Foo</span><span class=p>.</span><span class=nx>prototype</span><span class=p>.</span><span class=nx>myName</span> <span class=o>=</span> <span class=kd>function</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>name</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>Bar</span><span class=p>(</span><span class=nx>name</span><span class=p>,</span><span class=nx>label</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>Foo</span><span class=p>.</span><span class=nx>call</span><span class=p>(</span> <span class=k>this</span><span class=p>,</span> <span class=nx>name</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>this</span><span class=p>.</span><span class=nx>label</span> <span class=o>=</span> <span class=nx>label</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Then trying to build a family with Foo and Bar
</span></span></span><span class=line><span class=cl><span class=c1>// ...
</span></span></span></code></pre></div><p>A common mis-conception/confusion here is that either of the following approaches would also work, but they do not work as you&rsquo;d expect:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// doesn&#39;t work like you want!
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Bar</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nx>Foo</span><span class=p>.</span><span class=nx>prototype</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// works kinda like you want, but with
</span></span></span><span class=line><span class=cl><span class=c1>// side-effects you probably don&#39;t want :(
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Bar</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Foo</span><span class=p>();</span>
</span></span></code></pre></div><p>the right way is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// &#34;make a new &#39;Bar dot prototype&#39; object that&#39;s linked to &#39;Foo dot prototype&#39;.&#34;
</span></span></span><span class=line><span class=cl><span class=c1>// pre-ES6
</span></span></span><span class=line><span class=cl><span class=c1>// throws away default existing `Bar.prototype`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Bar</span><span class=p>.</span><span class=nx>prototype</span> <span class=o>=</span> <span class=nb>Object</span><span class=p>.</span><span class=nx>create</span><span class=p>(</span> <span class=nx>Foo</span><span class=p>.</span><span class=nx>prototype</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ES6+
</span></span></span><span class=line><span class=cl><span class=c1>// modifies existing `Bar.prototype`
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nb>Object</span><span class=p>.</span><span class=nx>setPrototypeOf</span><span class=p>(</span> <span class=nx>Bar</span><span class=p>.</span><span class=nx>prototype</span><span class=p>,</span> <span class=nx>Foo</span><span class=p>.</span><span class=nx>prototype</span> <span class=p>);</span>
</span></span></code></pre></div><p><strong>reference</strong>: <a href=https://github.com/getify/You-Dont-Know-JS/blob/master/this%20%26%20object%20prototypes/ch5.md#prototypal-inheritance>You-Dont-Know-JS: &ldquo;(Prototypal) Inheritance&rdquo;</a></p></div><div class=single-pagination><hr><div class=flex><div class=single-pagination-prev><div class=single-pagination-container-prev><div class=single-pagination-text>&lt;</div><div class=single-pagination-text><a href=/section1/2019-03-08-es6-bind-trick/>Bind specific arguments of a function</a></div></div></div><div class=single-pagination-next><div class=single-pagination-container-next><div class=single-pagination-text><a href=/section1/2019-03-28-javascript-comparison/>JavaScript Comparison operation at a glance</a></div><div class=single-pagination-text>></div></div></div></div><hr></div><div class=back-to-top><a href=#top>↑ Back to top</a></div></div></main></div><footer><div class=footer><p>© 2024 <a href=https://github.com/loyistro/Beige>loyistro/beige</a> theme</p></div></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></body><script>function isAuto(){return document.body.classList.contains("auto")}function setTheme(){if(!isAuto())return;document.body.classList.remove("auto");let e="light";window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),document.body.classList.add(e)}function invertBody(){document.body.classList.toggle("dark"),document.body.classList.toggle("light")}isAuto()&&window.matchMedia("(prefers-color-scheme: dark)").addListener(invertBody),setTheme()</script></html>